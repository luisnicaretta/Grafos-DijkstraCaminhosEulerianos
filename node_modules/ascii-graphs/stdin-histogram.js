const { histogram_format, GenericBins, NBins, unique_multiple, golden, unique, power_two, unique_ints, unique_100s, unique_1000s } = require('./');

const stdin = process.stdin;
stdin.setEncoding('utf8');

var histogram = new GenericBins(unique_multiple(10000));  // golden // unique // power_two; // unique_ints // unique_100s // unique_1000s
var histogram = new NBins();

stdin.on('data', function (chunk) {
    var lines = chunk.split('\n');
    lines.forEach(line => {
        if (!line) return;

        var value = line | 0;

        histogram.add(value);
    });

    // console.log('chunk', lines)
});

stdin.on('end', function () {
    console.log("Processed " + histogram.len() + " lines");

    // console.log('histogram', histogram);
    var histo_data = histogram.data();
    // console.log('data', histo_data);

    var formatted = histogram_format(histo_data);
    console.log('histogram');
    console.log(formatted.join('\n'));
});

stdin.on('error', console.error);

